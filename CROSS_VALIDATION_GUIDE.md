# 🔄 AI 코딩 도구 교차검증 가이드

> Claude Code를 메인으로, Codex/기타 도구를 교차검증에 활용하는 워크플로우

---

## 1. 기본 전략: Claude Code가 메인, 나머지는 검증

```
┌─────────────────────────────────────────────┐
│                 개발 흐름                      │
│                                               │
│  [Claude Code] ──구현──→ [코드]               │
│       │                      │                │
│       │                      ▼                │
│       │              [교차검증 대상]            │
│       │                      │                │
│       │         ┌────────────┼────────────┐   │
│       │         ▼            ▼            ▼   │
│       │    [Codex]    [Antigravity]  [ChatGPT] │
│       │         │            │            │   │
│       │         └────────────┼────────────┘   │
│       │                      ▼                │
│       │              [검증 결과 종합]           │
│       │                      │                │
│       ▼                      ▼                │
│  [README 업데이트] ◄── [코드 확정]             │
└─────────────────────────────────────────────┘
```

---

## 2. 교차검증이 필요한 시점

### 반드시 교차검증할 것

| 대상 | 이유 | 검증 방법 |
|------|------|----------|
| **룰 엔진 로직** | 프로젝트 핵심 자산. 로직 오류는 치명적 | 다른 LLM에 동일 룰을 설명하고 엣지 케이스 찾아달라고 요청 |
| **법률 도메인 지식** | LLM 할루시네이션 위험 가장 높음 | 반드시 2개 이상 LLM에서 교차 확인 + 실제 법령 원문 대조 |
| **DB 스키마** | 초기 설계 오류는 전체에 영향 | 스키마를 다른 도구에 보여주고 정규화/누락 검토 |
| **보안 관련 코드** | 인증, API 키 관리 등 | 다른 도구에 보안 취약점 리뷰 요청 |

### 교차검증 불필요 (Claude Code만으로 충분)

- 단순 CRUD API 구현
- UI 컴포넌트 구현
- 설정 파일 작성
- 문서 정리

---

## 3. Claude Code 워크플로우

### 세션 시작

```bash
# 프로젝트 루트에서 Claude Code 시작
cd KYUNGSA
claude

# Claude Code가 자동으로 CLAUDE.md를 읽음
# 첫 명령:
> CLAUDE.md와 README.md를 읽고 현재 진행 상황을 확인해줘
```

### 개발 사이클

```bash
# 1. 현재 할 일 확인
> README.md 체크리스트에서 다음 할 일이 뭐야?

# 2. 도메인 문서 먼저 (코드 전에)
> docs/domain/말소기준권리.md 를 작성해줘. 경매에서 말소기준권리의 개념과 판단 기준을 정리해줘.

# 3. 테스트 먼저 (TDD)
> 말소기준권리 이전 권리를 탐지하는 Hard Stop 룰의 테스트를 먼저 작성해줘

# 4. 구현
> 테스트를 통과하도록 hard_stop.py를 구현해줘

# 5. 검증
> 테스트 전체 실행해줘

# 6. README 업데이트
> README.md에서 완료된 체크리스트를 업데이트해줘
```

### 세션 종료

```bash
# 반드시 상태 업데이트
> CLAUDE.md의 '현재 진행 상황' 섹션을 업데이트해줘.
> 오늘 한 작업과 다음에 할 일을 정리해줘.
```

---

## 4. Codex 활용법 (교차검증용)

### Codex가 잘하는 것
- 코드 리뷰 및 버그 찾기
- 엣지 케이스 발견
- 리팩토링 제안
- 성능 최적화 제안

### 활용 프롬프트 템플릿

#### 룰 엔진 로직 검증

```
아래는 부동산 경매 물건의 리스크를 평가하는 룰 엔진 코드야.
Hard Stop 조건이 빠진 게 없는지, 엣지 케이스는 없는지 검토해줘.

[코드 붙여넣기]

특히 다음을 확인해줘:
1. 말소기준권리 판단 로직에 빈틈은 없는가?
2. 유치권/법정지상권 판단 시 놓치는 케이스는?
3. 임차인 대항력 판단에서 날짜 비교 로직이 정확한가?
```

#### DB 스키마 리뷰

```
아래는 경매 물건 분석 시스템의 DB 스키마야.
정규화 상태, 인덱스 필요성, 누락된 컬럼이 있는지 검토해줘.

[스키마 붙여넣기]

특히:
1. 권리 순위와 말소 여부를 효율적으로 조회할 수 있는 구조인가?
2. 분석 결과를 시계열로 추적할 수 있는가?
3. Private/Public 데이터 분리가 DB 레벨에서 보장되는가?
```

#### 보안 리뷰

```
아래 코드의 보안 취약점을 검토해줘.
특히 API 키 노출, SQL 인젝션, 크롤링 시 법적 리스크를 확인해줘.

[코드 붙여넣기]
```

---

## 5. 법률 도메인 교차검증 (가장 중요)

법률 관련 내용은 LLM 할루시네이션 위험이 가장 높다. 반드시 교차검증한다.

### 검증 프로세스

```
1단계: Claude Code로 도메인 문서 초안 작성
   → docs/domain/말소기준권리.md

2단계: 동일 내용을 다른 LLM에게 검증 요청
   → "아래 내용이 법적으로 정확한지 확인해줘. 틀린 부분 지적해줘."

3단계: 실제 법령 원문 대조
   → 민사집행법, 주택임대차보호법 등 원문 확인
   → https://www.law.go.kr 에서 직접 검색

4단계: 불일치 항목 정리 → Claude Code에 피드백
   → "2단계/3단계에서 다음 내용이 다르게 나왔어: [내용]. 확인하고 수정해줘."

5단계: 수정된 문서를 다시 검증

⭐ 6단계: 교차검증 결과를 docs/review/ 에 기록
   → 파일명: YYYY-MM-DD_주제.md
   → 내용: 검증 대상, 사용 도구, 불일치 항목, 최종 결론
```

### 교차검증 기록 규칙 (docs/review/)

> 모든 교차검증 결과는 `docs/review/` 아래에 마크다운 파일로 남긴다. 나중에 "왜 이렇게 결정했는가"를 추적하기 위함.

**파일명:** `YYYY-MM-DD_주제.md` (예: `2026-02-10_말소기준권리_검증.md`)

**템플릿:**
```markdown
# 교차검증: [주제]

- 날짜: YYYY-MM-DD
- 검증 대상: [파일/모듈명]
- 사용 도구: [Claude Code, Codex, ChatGPT, 법령원문 등]

## 검증 내용
[무엇을 검증했는가]

## 불일치 항목
| # | 항목 | Claude Code 결과 | 교차검증 결과 | 최종 채택 |
|---|------|-----------------|-------------|----------|
| 1 | ... | ... | ... | ... |

## 결론
[최종 결정 및 사유]
```

### 교차검증 필수 항목

```markdown
- [ ] 말소기준권리 판단 기준 (민사집행법 제91조)
- [ ] 대항력 발생 시점 (주택임대차보호법 제3조)
- [ ] 확정일자와 배당요구의 관계
- [ ] 유치권의 성립 요건과 경매에서의 효력
- [ ] 법정지상권 성립 요건 (민법 제366조)
- [ ] 소멸주의 vs 인수주의 적용 범위
```

---

## 6. 실전 시나리오별 가이드

### 시나리오 A: 새 룰 추가

```
[Claude Code] 
"경매 물건에서 가처분 등기가 있는 경우를 Yellow Zone에 추가하려고 해.
먼저 docs/rules/yellow_zone_rules.md에 이 조건을 추가해줘."

→ 문서 작성 완료

[Codex에 검증 요청]
"아래는 경매 물건 필터링의 Yellow Zone 조건 목록이야.
가처분 등기를 Yellow Zone으로 분류하는 게 맞는지,
아니면 Hard Stop이어야 하는 케이스가 있는지 검토해줘."

→ 검증 결과 반영

[Claude Code]
"검증 결과를 반영해서 코드를 구현하고 테스트 작성해줘.
백테스트도 돌려서 영향도 확인해줘."
```

### 시나리오 B: 크롤러 개발

```
[Claude Code]
"대법원 경매정보 사이트에서 물건 목록을 수집하는 크롤러를 만들어줘.
Selenium 기반으로, 요청 간격 3초 이상, robots.txt 준수."

→ 구현 완료

[Codex에 검증 요청]
"아래 크롤러 코드를 리뷰해줘.
1. 안티봇 탐지에 걸릴 가능성은?
2. 에러 핸들링이 충분한가?
3. 데이터 유실 가능성은?"

→ 피드백 반영

[Claude Code]
"다음 피드백을 반영해서 수정해줘: [피드백 내용]"
```

### 시나리오 C: 파싱 정확도 검증

```
[Claude Code]
"등기부등본 PDF를 파싱해서 권리 목록을 추출하는 코드를 만들어줘."

→ 구현 완료

[실제 등기부 5건으로 수동 검증]
- 파싱 결과 vs 사람 눈으로 확인한 결과 비교
- 불일치 항목 정리

[Claude Code]
"다음 5건 등기부에서 파싱 결과가 실제와 달랐어: [불일치 목록]
파서를 수정하고, 이 케이스들을 테스트에 추가해줘."
```

---

## 7. 일일 체크리스트

```markdown
### 작업 시작 시
- [ ] CLAUDE.md 읽기 (Claude Code가 자동으로 함)
- [ ] README.md에서 현재 단계 확인
- [ ] 어제 진행 상황 확인 (CLAUDE.md '현재 진행 상황')

### 작업 중
- [ ] 코드 전에 문서 먼저 (docs/)
- [ ] 테스트 먼저 작성 (TDD)
- [ ] 룰 변경 시 백테스트 실행
- [ ] 법률 내용은 교차검증
- [ ] 교차검증 수행 시 → docs/review/에 결과 기록

### 작업 종료 시
- [ ] 테스트 전체 통과 확인
- [ ] README.md 체크리스트 업데이트
- [ ] CLAUDE.md '현재 진행 상황' 업데이트
- [ ] 커밋 (컨벤션 준수)
```

---

*이 가이드는 프로젝트 진행에 따라 업데이트됩니다.*
